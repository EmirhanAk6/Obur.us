spring:
  application:
    name: oburus-api

  datasource:
    url: jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:oburus}
    username: ${DB_USER:oburus}
    password: ${DB_PASS:123}
    driver-class-name: org.postgresql.Driver
    hikari:
      maximum-pool-size: 10
      minimum-idle: 5
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000

  jpa:
    database-platform: org.hibernate.spatial.dialect.postgis.PostgisDialect
    hibernate:
      ddl-auto: validate
    show-sql: ${SHOW_SQL:false}
    properties:
      hibernate:
        format_sql: true
        jdbc:
          batch_size: 20
        order_inserts: true
        order_updates: true

  cache:
    type: caffeine
    caffeine:
      spec: maximumSize=500,expireAfterWrite=1h

  jackson:
    serialization:
      write-dates-as-timestamps: false
    deserialization:
      fail-on-unknown-properties: false

  # âœ… CORRECT NEO4J PREFIX
  neo4j:
    uri: ${NEO4J_URI:bolt://localhost:7687}
    authentication:
      username: ${NEO4J_USER:neo4j}
      password: ${NEO4J_PASS:oburus_pass}
    pool:
      max-connection-pool-size: 10
      connection-acquisition-timeout: 60s

server:
  port: ${PORT:3000}
  compression:
    enabled: true
  error:
    include-message: always
    include-stacktrace: on_param

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  prometheus:
    metrics:
      export:
        enabled: true

# Custom application properties (warnings are NORMAL)
recommender:
  base-url: ${RECO_URL:http://localhost:8000}
  timeout: 30s
  max-candidates: 200

cors:
  allowed-origins: ${ALLOWED_ORIGINS:*}
  allowed-methods: GET,POST,PUT,DELETE,OPTIONS
  allowed-headers: "*"
  max-age: 3600

logging:
  level:
    root: INFO
    com.oburus: ${LOG_LEVEL:DEBUG}
    org.hibernate.SQL: ${SQL_LOG_LEVEL:DEBUG}
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE

jwt:
  secret: "THIS_IS_A_VERY_LONG_SECRET_KEY_256_BITS_MINIMUM"
  expiration: 3600000

springdoc:
  api-docs:
    path: /api-docs
  swagger-ui:
    path: /swagger-ui.html
    enabled: true
